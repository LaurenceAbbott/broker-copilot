<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Broker Copilot – Product Recommendations</title>

  <!-- Link to your separated CSS -->
  <link rel="stylesheet" href="./src/styles.css" />
</head>

<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <h1>Broker Copilot – Product Recommendations</h1>
        <div class="subtitle">
          Quick capture → clarify → recommend products → build a quote pack.
          <span class="tiny">Hybrid engine (rules + AI-style classification stub). Ready to swap in a real endpoint later.</span>
        </div>
      </div>

      <div class="mode">
        <div class="pill">
          <span>Line:</span>
          <select id="lineSelect" class="select">
            <option value="commercial" selected>Commercial (SME)</option>
            <option value="personal" disabled>Personal (coming next)</option>
          </select>
        </div>

        <div class="pill" id="confidencePill">
          <span class="dot warn"></span>
          <span>Confidence: Medium</span>
        </div>
      </div>
    </header>

    <section class="grid">
      <!-- LEFT: CAPTURE -->
      <article class="card">
        <div class="cardHeader">
          <h2>Quick capture</h2>
          <div class="kpiRow">
            <span class="badge" id="recapBadge"><span class="dot warn"></span><span>Capture incomplete</span></span>
          </div>
        </div>

        <div class="cardBody">
          <div class="row">
            <div>
              <label>Customer name (optional)</label>
              <input id="custName" placeholder="e.g., Sam Taylor" />
            </div>
            <div>
              <label>Business type</label>
              <select id="bizType" class="select selectFull">
                <option value="">Select…</option>
                <option>Sole trader</option>
                <option>Limited company</option>
                <option>Partnership</option>
                <option>Other</option>
              </select>
            </div>
          </div>

          <div class="mt12">
            <label>What does the business do? (free text)</label>
            <textarea id="activityText" placeholder="e.g., 'I’m a self-employed gardener. Sometimes I do patios and fencing. I keep tools in a van overnight.'"></textarea>
            <div class="small mt8">
              Tip: paste what the customer says verbatim. The tool will suggest tags + follow-up questions.
            </div>
          </div>

          <div class="divider"></div>

          <div class="row">
            <div>
              <label>Turnover band (optional)</label>
              <select id="turnover" class="select selectFull">
                <option value="">Unknown</option>
                <option value="0-50">£0–£50k</option>
                <option value="50-250">£50k–£250k</option>
                <option value="250-1000">£250k–£1m</option>
                <option value="1000+">£1m+</option>
              </select>
            </div>
            <div>
              <label>Staff (incl. labour-only)</label>
              <select id="staff" class="select selectFull">
                <option value="">Unknown</option>
                <option value="0">0</option>
                <option value="1-4">1–4</option>
                <option value="5-19">5–19</option>
                <option value="20+">20+</option>
              </select>
            </div>
          </div>

          <div class="row mt12">
            <div>
              <label>Premises</label>
              <select id="premises" class="select selectFull">
                <option value="">Unknown</option>
                <option>Home-based</option>
                <option>Rented unit / office</option>
                <option>Shop / public-facing</option>
                <option>Warehouse / storage</option>
                <option>Multiple sites</option>
              </select>
            </div>
            <div>
              <label>Any business vehicles?</label>
              <select id="vehicles" class="select selectFull">
                <option value="">Unknown</option>
                <option value="no">No</option>
                <option value="yes">Yes</option>
              </select>
            </div>
          </div>

          <div class="mt12">
            <label>Common concerns (click to toggle)</label>
            <div class="chips" id="concernChips"></div>
          </div>

          <div class="mt12">
            <label class="label">Concerns / worries (free text)</label>
            <textarea id="concernsFreeText" class="textarea" rows="3"
              placeholder="e.g. Tools left in van overnight, public on site, contract requires £5m PL, worried about poor workmanship claims..."></textarea>

            <div id="clarifiersPanel" class="panel" style="display:none; margin-top:12px;">
              <div class="panelTitle">Clarifiers needed</div>
              <div id="clarifiersList" class="small" style="margin-top:8px;"></div>
            </div>
          </div>

          <div class="divider"></div>

          <div>
            <label>Suggested tags (auto) – click to toggle</label>
            <div class="chips" id="tagChips"></div>
          </div>

          <div class="btnRow">
            <button id="runBtn">Generate recommendations</button>
            <button class="secondary" id="resetBtn">Reset</button>
          </div>

          <div class="hr"></div>
          <div class="small">
            <b>Next step:</b> swap the “AI stub” with an API call, but keep the same UI + scoring.
            <br />
            <span class="tiny">Feedback is stored locally (localStorage) in this prototype.</span>
          </div>
        </div>
      </article>

      <!-- RIGHT: RESULTS + PACK -->
      <div class="rightGrid">
        <article class="card">
          <div class="cardHeader">
            <h2>Recommendations</h2>
            <div class="kpiRow">
              <span class="badge" id="missingBadge"><span class="dot warn"></span><span>Clarifiers: 0</span></span>
              <span class="badge" id="summaryBadge"><span class="dot warn"></span><span>0 products</span></span>
            </div>
          </div>

          <div class="cardBody">
            <div class="sectionTitle">
              <h3>Follow-up questions</h3>
              <span class="tiny" id="followupHint">Generated from activity + tags</span>
            </div>

            <ul class="qList" id="followupList"></ul>

            <div class="divider"></div>
            <div id="groups"></div>
          </div>
        </article>

        <article class="card">
          <div class="cardHeader">
            <h2>Quote pack</h2>
            <span class="badge" id="packBadge"><span class="dot warn"></span><span>0 selected</span></span>
          </div>

          <div class="cardBody">
            <div class="small" id="packIntro">
              Add suggested products to build a pack. Then “Start quote” (stub) or export to JSON.
            </div>

            <div class="divider"></div>

            <div class="packList" id="packList"></div>

            <div class="btnRow">
              <button id="startPackBtn">Start quotes (stub)</button>
              <button class="secondary" id="exportBtn">Export pack JSON</button>
            </div>

            <div class="divider"></div>

            <div class="small">
              <b>Agent outcomes</b>
              <div class="tiny">Tap feedback on each product to teach the tool over time.</div>
            </div>
          </div>
        </article>
      </div>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <!-- Link to your separated JS -->
  <script src="./src/app.js"></script>
</body>
</html>
